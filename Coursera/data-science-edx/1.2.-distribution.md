# 1.2. Data Visualization - Distribution

*by Rafael Irizarry*

pretend we need to present the heigth of a class distribution to E.T. the extra terestrial

```R
prop.table(table(heights$sex))
```
|Female|      Male|
|---|--|
|0.2266667| 0.7733333 |

## Cumulative Distribution Function - CDF

$$
F(a) = Pr(x \leq a)
$$

**PR stand for probability**

F(b) - F(a) to determine the number of student between 2 arbitrary values

![Cumulative sum of distribution according to size](Rplot01.png)

This graph does not show directly the information

## Empirical CDF

![extract from the course ECDF](ecdf-1.png)

## Histogram

A solution could be to **create bin of the same size**

```R
a <- seq(min(tab), max(tab), length = 100)    # define range of values spanning the dataset
cdf_function <- function(x) {    # computes prob. for a single value
    mean(tab <= x)
}
cdf_values <- sapply(a, cdf_function)
plot(a, cdf_values)
```

## Smooth Density Plot

Y = Density (%) = Area under the line = 1

Smooth = smoothed --> estimate (between)

We must consider that the obseved part comes from many many more values and it's just a small part of it. So smoothing and guessing what is inbetween make sense.
Assumption that we can approximate

The smoothed desnity plot is the curve that covers the top of the histogram when the bins are very very small

Use the frequency scale rather than the count scale = **density**

Usage: Easy to compare 2 distribution


## Exercice

### Filtering

```R
male <- table(heights$height[heights$sex == "Male"])
male <- heights$height[heights$sex == "Male"]
sum(male <= 72 & male > 69)/sum(male>0)
mean(male <= 72 & male > 69)
```


### mesuring based on the average and the deviation

**pnorm** must be used to create the whole distribution

pnorm is wroking on **value** equal or below based on **average** and **standard deviation**



```R
library(dslabs)
data(heights)
```

Proportion is similar neat the mean value
```R
x <- heights$height[heights$sex=="Male"]
avg <- mean(x)
stdev <- sd(x)
pnorm(72, avg, stdev) - pnorm(69, avg, stdev)
```

Compare on flat tail
```R
x <- heights$height[heights$sex == "Male"]
exact <- mean(x > 79 & x <= 81)
avg <- mean(x)
stdev <- sd(x)
approx = pnorm(81, avg, stdev) - pnorm(79, avg, stdev)
exact/approx
```

Find every man bigger than 7 feet (84 inches 7*12) with an average of 69 inches and a std dev of 3 inches and in the 10⁹ men in the world between 18 and 40
```R
print(1-pnorm(7*12,69,3))
p <- 1 - pnorm(6*12+8, 69, 3)
N <- round(p * 10^9)
150/N
```